# Single number representation

DIGITS = [
  [
    '0000000000'
    '0001111000'
    '0010001100'
    '0010001100'
    '0010001100'
    '0010001100'
    '0010001100'
    '0010001100'
    '0010001100'
    '0001111000'
    '0000000000'
  ], [
    '0000000000'
    '0001110000'
    '0010110000'
    '0000110000'
    '0000110000'
    '0000110000'
    '0000110000'
    '0000110000'
    '0000110000'
    '0011111100'
    '0000000000'
  ], [
    '0000000000'
    '0001111000'
    '0010001100'
    '0010001100'
    '0000001100'
    '0000011000'
    '0000110000'
    '0001100100'
    '0011000100'
    '0011111100'
    '0000000000'
  ], [
    '0000000000'
    '0001111000'
    '0010001100'
    '0000001100'
    '0000001100'
    '0000111000'
    '0000001100'
    '0000001100'
    '0010001100'
    '0001111000'
    '0000000000'
  ], [
    '0000000000'
    '0000111000'
    '0011011000'
    '0011011000'
    '0010011000'
    '0110011000'
    '0110011000'
    '0111111110'
    '0000011000'
    '0001111110'
    '0000000000'
  ], [
    '0000000000'
    '0011111100'
    '0010001100'
    '0010000000'
    '0011111000'
    '0000001100'
    '0000001100'
    '0000001100'
    '0010001100'
    '0001111000'
    '0000000000'
  ], [
    '0000000000'
    '0001111000'
    '0010000100'
    '0010000000'
    '0010000000'
    '0011111000'
    '0010001100'
    '0010001100'
    '0010001100'
    '0001111000'
    '0000000000'
  ], [
    '0000000000'
    '0011111100'
    '0010000110'
    '0010000110'
    '0000001100'
    '0000011000'
    '0000110000'
    '0000110000'
    '0000110000'
    '0000110000'
    '0000000000'
  ], [
    '0000000000'
    '0001111000'
    '0010001100'
    '0010001100'
    '0010001100'
    '0001111000'
    '0010001100'
    '0010001100'
    '0010001100'
    '0001111000'
    '0000000000'
  ], [
    '0000000000'
    '0001111000'
    '0010001100'
    '0010001100'
    '0010001100'
    '0001111100'
    '0000001100'
    '0000001100'
    '0010001100'
    '0001111000'
    '0000000000'
  ]
]

class Number

  constructor: (@digit, @value, @context) ->
    @render()

  set: (value) ->
    @value = value
    @render()

  clear: ->
    @context.fillStyle = '#000011'
    offset = Number::OFFSET * @digit * 3
    pattern = DIGITS[@value]

    for i in [0...11]
      for j in [0...10]
        @context.fillRect j*3 + offset, i*3, 2, 2

  render: ->
    @clear()

    @context.fillStyle = '#ffff00'
    offset = Number::OFFSET * @digit * 3
    pattern = DIGITS[@value]

    for i in [0...11]
      for j in [0...10]
        @context.fillRect j*3 + offset, i*3, 2, 2 if pattern[i][j] is '1'

Number::OFFSET = 8
Number::MARGIN = 10

@Number = Number
